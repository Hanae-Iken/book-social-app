<div class="book-card"
     [class.shareable]="book.shareable"
     [class.archived]="book.archived">
  <div class="book-cover-wrapper">
    <img [src]="bookCover" class="book-cover" alt="Book cover">
    <div class="book-status" *ngIf="book.shareable">
      <span class="status-badge shareable">Partageable</span>
    </div>
    <div class="book-status" *ngIf="book.archived">
      <span class="status-badge archived">Archivé</span>
    </div>
  </div>

  <div class="book-content">
    <div class="book-header">
      <h5 class="book-title">
        <i class="fas fa-book"></i>
        {{book.title}}
      </h5>
      <h6 class="book-author">
        <i class="fas fa-user-edit"></i>
        {{book.authorName}}
      </h6>
    </div>

    <div class="book-meta">
      <span class="meta-item">
        <i class="fas fa-barcode"></i>
        {{book.isbn}}
      </span>
      <span class="meta-item" *ngIf="book.owner">
        <i class="fas fa-user"></i>
        {{book.owner}}
      </span>
    </div>

    <p class="book-synopsis">{{book.synopsis}}</p>
  </div>

  <div class="book-footer">
    <div class="book-rating">
      <app-rating [rating]="book.rate || 0"></app-rating>
      <span class="rating-value" *ngIf="(book.rate || 0) > 0">
        {{book.rate}}
      </span>
    </div>

    <div class="book-actions">
      <ng-container *ngIf="!manage">
        <button class="action-btn info" (click)="onShowDetails()" title="Détails">
          <i class="fas fa-info-circle"></i>
        </button>
        <button class="action-btn borrow" (click)="onBorrow()" title="Emprunter">
          <i class="fas fa-book-reader"></i>
        </button>
        <button class="action-btn favorite" (click)="onAddToWaitingList()" title="Ajouter aux favoris">
          <i class="fas fa-heart"></i>
        </button>
      </ng-container>

      <ng-container *ngIf="manage">
        <button class="action-btn edit" (click)="onEdit()" title="Modifier">
          <i class="fas fa-edit"></i>
        </button>
        <button class="action-btn share" (click)="onShare()" title="Partager">
          <i class="fas fa-share-nodes"></i>
        </button>
        <button class="action-btn archive" (click)="onArchive()" title="Archiver">
          <i class="fas fa-archive"></i>
        </button>
      </ng-container>
    </div>
  </div>
</div>
